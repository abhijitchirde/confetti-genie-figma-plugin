function runPlugin(){checkLayerStatus(),figma.ui.onmessage=(e=>{const t=e.data.input;for(const n of figma.currentPage.selection)"generate-confetti"===e.type&&generateConfetti(n,t)}),figma.on("selectionchange",()=>{checkLayerStatus()})}function checkLayerStatus(){0===figma.currentPage.selection.length?figma.ui.postMessage({error:"no-frame",content:{errorMessage:errorMessage}}):"FRAME"!==figma.currentPage.selection[0].type?figma.ui.postMessage({error:"no-frame",content:{errorMessage:errorMessage}}):"FRAME"===figma.currentPage.selection[0].type&&figma.ui.postMessage({error:"all-clear",content:{noError:noError}})}function generateConfetti(e,t){const n=e.width,r=e.height;for(let o=0;o<t/2;o++){const t=figma.createRectangle(),o=numBetween(.01*n,.02*n),a=numBetween(.01*r,.02*r);t.resize(o,a),t.x=numBetween(0,n),t.y=numBetween(0,r),t.fills=[{type:"SOLID",color:setColor(),opacity:setOpacity()}],t.rotation=numBetween(-180,180),e.appendChild(t)}for(let o=0;o<t/2;o++){const t=figma.createEllipse(),o=numBetween(.005*n,.015*n),a=o;t.resize(o,a),t.x=numBetween(0,n),t.y=numBetween(0,r),t.fills=[{type:"SOLID",color:setColor(),opacity:setOpacity()}],e.appendChild(t)}for(let o=0;o<t/2;o++){const t=figma.createStar();t.pointCount=numBetween(4,6);const o=numBetween(.01*n,.02*n),a=o;t.resize(o,a),t.x=numBetween(0,n),t.y=numBetween(0,r),t.fills=[{type:"SOLID",color:setColor(),opacity:setOpacity()}],t.rotation=numBetween(-180,180),e.appendChild(t)}for(let o=0;o<t/3;o++){const t=figma.createPolygon();t.pointCount=numBetween(3,6);const o=numBetween(.01*n,.02*n),a=o;t.resize(o,a),t.x=numBetween(0,n),t.y=numBetween(0,r),t.fills=[{type:"SOLID",color:setColor(),opacity:setOpacity()}],t.rotation=numBetween(-180,180),e.appendChild(t)}}function numBetween(e,t){return Math.floor(Math.random()*(t-e+1))+e}function setColor(){return colors[Math.floor(Math.random()*colors.length)]}function setOpacity(){return opacity[Math.floor(Math.random()*opacity.length)]}figma.showUI(__html__,{width:330,height:240});const errorMessage="Please select a frame",noError="All clear",colors=[{r:.01,g:.64,b:.96},{r:.605,g:.96,b:.99},{r:.789,g:.99,b:.746},{r:.863,g:.738,b:.98},{r:.99,g:.621,b:.109},{r:.617,g:.93,b:.102},{r:.46,g:.374,b:.996},{r:1,g:.13,b:.985},{r:.964,g:.144,b:.519},{r:.281,g:.046,b:.656},{r:.296,g:.785,b:.937},{r:.96,g:.277,b:.129},{r:1,g:.93,b:.21},{r:.73,g:.242,b:.011}],opacity=[.25,.4,.5,.6,.75,.8,.9,1];runPlugin();
function runPlugin(){figma.ui.onmessage=(e=>{if("invalid-hex"===e.type&&figma.notify("Please enter a valid hex color code",{timeout:1500}),"generate-random"===e.type)if(0===figma.currentPage.selection.length)figma.notify("Please select a frame to add Confetti",{timeout:1200});else if("FRAME"!==figma.currentPage.selection[0].type)figma.notify("Please select a frame to add Confetti",{timeout:1200});else{const t=e.data.input;for(const e of figma.currentPage.selection)"FRAME"===e.type&&randomConfetti(e,t,randomColors)}if("generate-selection"===e.type)if(0===figma.currentPage.selection.length)figma.notify("Please select a frame to add Confetti",{timeout:1200});else if("FRAME"!==figma.currentPage.selection[0].type)figma.notify("Please select a frame to add Confetti",{timeout:1200});else{const t=e.data.inputColors,n=e.data.input;for(const e of figma.currentPage.selection)"FRAME"===e.type&&(0===t.length?figma.notify("Please add colors to your Confetti",{timeout:1200}):selectionColorsConfetti(e,n,t))}})}function selectionColorsConfetti(e,t,n){const o=[];for(let e of n){let t=hexToRgbDivBy255(e);o.push(t)}generateConfetti(e,t,o)}function randomConfetti(e,t,n){generateConfetti(e,t,n)}function generateConfetti(e,t,n){const o=e.width,i=e.height;for(let a=0;a<t/2;a++){const t=figma.createRectangle(),a=numBetween(.007*o,.04*o),r=numBetween(.01*i,.02*i);t.resize(a,r),t.x=numBetween(0,o),t.y=numBetween(0,i),t.fills=[{type:"SOLID",color:setColor(n),opacity:setOpacity()}],t.rotation=numBetween(-180,180),e.appendChild(t)}for(let a=0;a<t/2;a++){const t=figma.createEllipse(),a=numBetween(.005*o,.015*o),r=a;t.resize(a,r),t.x=numBetween(0,o),t.y=numBetween(0,i),t.fills=[{type:"SOLID",color:setColor(n),opacity:setOpacity()}],e.appendChild(t)}for(let a=0;a<t/2;a++){const t=figma.createStar();t.pointCount=numBetween(4,6);const a=numBetween(.01*o,.02*o),r=a;t.resize(a,r),t.x=numBetween(0,o),t.y=numBetween(0,i),t.fills=[{type:"SOLID",color:setColor(n),opacity:setOpacity()}],t.rotation=numBetween(-180,180),e.appendChild(t)}for(let a=0;a<t/3;a++){const t=figma.createPolygon();t.pointCount=numBetween(3,6);const a=numBetween(.01*o,.02*o),r=a;t.resize(a,r),t.x=numBetween(0,o),t.y=numBetween(0,i),t.fills=[{type:"SOLID",color:setColor(n),opacity:setOpacity()}],t.rotation=numBetween(-180,180),e.appendChild(t)}}function numBetween(e,t){return Math.floor(Math.random()*(t-e+1))+e}function setColor(e){return e[Math.floor(Math.random()*e.length)]}function setOpacity(){return opacity[Math.floor(Math.random()*opacity.length)]}function hexToRgbDivBy255(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16)/255,g:parseInt(t[2],16)/255,b:parseInt(t[3],16)/255}:null}figma.showUI(__html__,{width:250,height:425});const randomColors=[{r:.01,g:.64,b:.96},{r:.605,g:.96,b:.99},{r:.789,g:.99,b:.746},{r:.863,g:.738,b:.98},{r:.99,g:.621,b:.109},{r:.617,g:.93,b:.102},{r:.46,g:.374,b:.996},{r:1,g:.13,b:.985},{r:.964,g:.144,b:.519},{r:.281,g:.046,b:.656},{r:.296,g:.785,b:.937},{r:.96,g:.277,b:.129},{r:1,g:.93,b:.21},{r:.73,g:.242,b:.011}],opacity=[.35,.45,.6,.65,.75,.85,.9,1];runPlugin();
<style>

  body {
    background-color: #FFF;
    font-family: Arial, Helvetica, sans-serif;
  }

     /* tabs related styling */
.tab {
    overflow: hidden;
    background-color: #fdfdfd;
    width: 100%;
    text-align: center;
    margin-bottom: 1.5%;
    /* box-shadow: 0 1px 2px rgba(230, 230, 230, 60); */
}

.tab button {
    border-bottom: 2px solid #fdfdfd;
    border-top: none;
    border-right: none;
    border-left: none;
    outline: none;
    cursor: pointer;
    padding: 1% 5%;
    margin: 0%;
    background-color: #fdfdfd;
    text-align: center;
    font-size: 0.8rem;
    font-weight: 300;
    color: rgb(158, 171, 196);
    display: inline-block;
    text-align: center;
}

.tab button:hover {
    background-color: #fdfdfd;
}

.tab button.active {
    background-color: #fdfdfd;
    border-bottom: 2px solid rgba(137, 190, 255, 40);
    /* border-radius: 1px solid #fcf7f9; */
    color: rgb(79, 84, 107);
    transition-duration: 0.4s;
    font-weight: 300;
}

.tabcontent {
    display: none;
    border-top: none;
    align-items: center;
    background-color: #fdfdfd;
    width: 100%;
    margin-left: 0;
    margin-right: 0;
    padding-bottom: 1.87%;
    margin-bottom: 2%;
}

/* content card styling */

.tab1-container {
    padding: 1% 0%;
    margin-left: 1%;
    margin-right: 1%;
    background-color: #fdfdfd;
    text-align: center;
}

.tab2-container {
    padding: 1% 0%;
    margin-left: 1%;
    margin-right: 1%;
    background-color: #fdfdfd;
    text-align: center;
}

  /* Main div with elements */

  .main-div{
    align-content: center;
    text-align: center; 
    margin-top: 2%;
  }

  /* Color selection */
  .input-colors-section{
    display: block;
    text-align: center;
    width: 100%;
    margin: 0;
    padding: 0;
  }

  .color-picker{
    display: block;
    text-align: center;
    margin: 0;
    padding-bottom: 6%;
    width: auto;
  }

  .picker-label{
    display: inline-block;
    color: rgb(119, 119, 119);
    font-weight: 400;
    font-size: 0.8rem;
    margin: 0;
    vertical-align: middle;
    height: 5%;
    width: auto;
    padding-top: 3.5%;
  }

  .input-picker{
    display: inline-block;
    height: 5.5%;
    width: 15%;
    vertical-align: middle;
    margin: 0 2%;
    padding: 0;
    border: 1px solid white;
    border-radius: 4px;
  }

  .hex-input{
    display: inline-block;
    width: 28%;
    font-weight: 400;
    color: rgb(119, 119, 119);
    height: 4%;
    vertical-align: middle;
    font-size: 0.75rem;
  }

  .display-color-div{
      display: block;
      border: 1px solid darkgray;
      border-radius: 5px;
      margin: 10% 2%;
      padding: 2% 5%;
      width: auto;
      height: 25%;
      overflow: auto;
      scroll-behavior: smooth;
      text-align: left;
    }

  /* Scrollbar */
  ::-webkit-scrollbar {
    width: 4px;
    }
    ::-webkit-scrollbar-track {
      background: #f1f1f1; 
    }
    ::-webkit-scrollbar-thumb {
      background: rgb(170, 170, 170); 
    }
    ::-webkit-scrollbar-thumb:hover {
      background: rgb(139, 139, 139); 
    }

  .display-color-text1{
    display: inline-block;
    color: rgb(182, 182, 182);
    font-weight: 400;
    font-size: 0.9rem;
    margin: 0;
    padding-bottom: 3%;
    padding-left: 5%;
    padding-right: 5%;
    text-align: left;
    vertical-align: top;
  }

  .display-color-text2{
    display: inline-block;
    color: rgb(182, 182, 182);
    font-weight: 400;
    font-size: 0.9rem;
    margin: 0;
    padding-bottom: 3%;
    padding-left: 5%;
    padding-right: 5%;
    text-align: left;
    vertical-align: top;
  }
  

  /* Slider styling */

  .slider-div {
    background-color: #fff; 
    padding-top: 4%;
    padding-bottom: 0.3%; 
    margin: 2% 2%;
    border-radius: 8px;
    box-shadow: 0 2px 8px rgba(236, 236, 236, 0.65);
  }

  .confetti-question {
    text-align: center; 
    color:#344CB7; 
    margin: 3% 0% 4%;
    font-family: Arial, Helvetica, sans-serif;
    font-size: 0.8rem;
  }


  .slider-input {
    -webkit-appearance: none;
    width: 60%;
    height: 1.5%;
    border-radius: 5px;  
    margin: 3% 0;
    background: #d3d3d3;
    outline: none;
    opacity: 0.7;
    -webkit-transition: .2s;
    transition: opacity .2s;
  }

  .slider-input::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 12px;
  height: 12px;
  border-radius: 50%; 
  background: darkcyan;
  cursor: pointer;
}

  .slider-label {
    font-family: Arial, Helvetica, sans-serif; 
    color: #9400D3; 
    font-size: 1.1rem; 
    text-align: center; 
    margin-top: 2%; 
    font-weight: 400;
  }

  a:link, a:active {
    text-decoration: none;
  }

  .button-div {
    margin-top: 3%;
    text-align: center;
  }

  /* Button styling */
  .large-button {
    font-size: 0.8rem;
    margin: 3% 0%;
    padding: 2% 1%;
    width: 35%;
    display: inline;
    border: 1px solid #516BEB;
    background-color: #fff;
    border-radius: 4px;
    color: #516BEB;
    cursor: pointer;
  }

  .large-button:hover {
    background-color: #516BEB;
    color: #fff;
    transition-duration: 0.2s;
  }

  .large-button:active {
    background-color: #3c54cc;
    color: #fff;
    transition-duration: 0.2s;
  }
    /* Footer styling */

  .bottomContainer {
    background: none repeat scroll 0 0 transparent;
    bottom: 3.49%;
    position: fixed;
    width: 100%;
    display: block;
    padding-left: 1%;
  }

  .bottomItem {
    height: 7%;
    margin: auto;
    width: 100%;
    display: inline-block;
    text-align: left;
  }

  .blank-space-in-footer {
    display: inline-block;
    width: 88%;
  }

  .bottom-text {
    font-family: Arial, Helvetica, sans-serif;
    font-size: 0.7rem;
    color: rgb(158, 171, 196);
    margin: 0.7% 0 0;
    text-align: left;
    display: inline-block;
    padding-left: 2%;
    opacity: 0.45;
    vertical-align: top;
  }

  .heart {
    font-family: Arial, Helvetica, sans-serif;
    font-size: 0.95rem;
    color: rgb(158, 171, 196);
    margin: 0;
    text-align: center;
    display: inline-block;
    padding-left: 0;
  }

  a:link,
  a:visited {
    color: rgb(158, 171, 196);
    cursor: pointer;
    text-decoration: none;
    opacity: 0.45;
  }

  a:hover {
    color: rgb(221, 41, 41);
    opacity: 0.8;
    transition-duration: 0.3s;
  }


</style>


  <!-- one div for the main UI body of plugin -->
  <div id="main" class="main-div">

      <!-- Tab links -->
      <div class="tab">
        <button class="tablinks" onclick="openTab(event, 'selectColors')" id="defaultOpen">Select colors</button>
        <button class="tablinks" onclick="openTab(event, 'randomColors')">Random colors</button>
      </div>

      <!-- tab content -->
      <!-- Tab 1 -->
      <div id="selectColors" class="tabcontent">
        <!-- Elements to select colors -->
        <div class="input-colors-section">
          <div class="color-picker">
            <label class="picker-label" for="color" >Select color</label>
            <input class="input-picker" type="color" name="color" id="color" value="#FF0000">
            <input class="hex-input" type="text" id="hex" name="hex" value="#FF0000">
          </div>
  
        <div class="small-buttons-section">
          <button class="small-button" name="add" id="add">+ Add</button>
          <button class="small-button" name="reset" id="reset">Reset</button>
        </div>
        
        <div class="display-color-div">
          <p class="display-color-text1" id="display-color1">No colors added</p>
          <p class="display-color-text2" id="display-color2"></p>
        </div>
      </div>
  
      <!-- Elements asking about density of confetti -->
      <div>
        
        <div class="slider-div">
          <p class="confetti-question">How much confetti do you want?</p>
          <input type="range" id="slider" class="slider-input" min="30" max="200" value="91">
          <p id="sliderLabel" class="slider-label">party</p>
        </div>
      </div>
      
      <div class="button-div">
        <button id="generateSelection" class="large-button">Generate</button>
      </div>
    </div>

    <!-- Tab 2 -->
    <div id="randomColors" class="tabcontent">
      <!-- Elements asking about density of confetti -->
      <div>
        <div class="slider-div">
          <p class="confetti-question">How much confetti do you want?</p>
          <input type="range" id="slider" class="slider-input" min="30" max="200" value="91">
          <p id="sliderLabel" class="slider-label">party</p>
        </div>
      </div>
      <div class="button-div">
        <button id="generateRandom" class="large-button">Generate</button>
      </div>
    </div>

    </div>

    <!-- Created a container at bottom to hold two elements at fixed position and at center. Added class in style for handling it -->
    <div class="bottomContainer">
      <footer class="bottomItem">
        <!-- <p class="bottom-text">Have fun!</p> -->
        <div class="blank-space-in-footer"></div>
        <p class="heart"><a href="https://twitter.com/abhichirde" target="_blank">♥️</a></p>
      </footer>
    </div>
      
  </div>




<script>

  //Tabs handling JS code
  function openTab(evt, contentDivID) {

  // Get all elements with class="tabcontent" and hide them
  const tabcontent = document.getElementsByClassName("tabcontent");
  for (let i = 0; i < tabcontent.length; i++) {
    tabcontent[i].style.display = "none";
  }

  // Get all elements with class="tablinks" and remove the class "active"
  const tablinks = document.getElementsByClassName("tablinks");
  for (let i = 0; i < tablinks.length; i++) {
    tablinks[i].className = tablinks[i].className.replace(" active", "");
  }

  // Show the current tab, and add an "active" class to the button that opened the tab
  document.getElementById(contentDivID).style.display = "block";
  evt.currentTarget.className += " active";

  }

  // Get the element with id="defaultOpen" and click on it
  document.getElementById("defaultOpen").click();

  //Initially defining the div areas for error and UI
  const errorArea = document.getElementById("error");
  const uiMain = document.getElementById("main");

  // Displaying added colors and pushing these colors to submission array
  var inputColors = [];
  var counter = 1;

  var hexinput = document.getElementById("hex");
  var pickerInput = document.getElementById("color");

  pickerInput.oninput = function() {
    var pickerValue = `${pickerInput.value}`.toUpperCase();
    hexinput.value = pickerValue;
    pickerValue = `${this.value}`.toUpperCase();
  }

  document.getElementById('add').onclick = () => {

    const color = document.getElementById("color");
    const colorValue = `${color.value}`.toUpperCase();
    inputColors.push(colorValue);
    const display1 = document.getElementById("display-color1");
    const display2 = document.getElementById("display-color2");
    const displayDiv = document.getElementById("display-color-div");

    if(counter === 1){
      if(display1.innerHTML === "No colors added"){
      display1.innerHTML = "";
      display1.innerHTML += "<span style='color:" + colorValue + "'>" + colorValue + "<span><br>";
      }else{
      // display.innerHTML += colorValue+"<br>";
      display1.innerHTML += "<span style='color:" + colorValue + "'>" + colorValue + "<span><br>";
      }
    }else{
      if(display2.innerHTML === "No colors added"){
      display2.innerHTML = "";
      display2.innerHTML += "<span style='color:" + colorValue + "'>" + colorValue + "<span><br>";
      }else{
      // display.innerHTML += colorValue+"<br>";
      display2.innerHTML += "<span style='color:" + colorValue + "'>" + colorValue + "<span><br>";
      }
    }
    counter *= -1;
  };

  document.getElementById('reset').onclick = () => {
    inputColors = [];
    document.getElementById("display-color1").innerHTML = "No colors added";
    document.getElementById("display-color2").innerHTML = "";
    counter = 1;
  };

  //displaying slider input to as label below slider
  const sliderInput = document.getElementById("slider");
  const label = document.getElementById("sliderLabel");

  //Event function on change in the slider value
  sliderInput.oninput = function (){
    //Define the count value from slider. Var is used in place of const as we want to reassign it to this.value and also access it outside the function in postMessage for drawing confetti
    var count = parseInt(sliderInput.value, 10);
    //call function to display label according to the value
    displayConfettiLabel(count);
    //update count label to the current value contained in the event object
    count = parseInt(this.value, 10);
  }

  //Define a function to display label according to changing value of the slider input
  function displayConfettiLabel(count){
    if(count >= 30 && count <= 60){
        label.innerHTML = "minimal";
        label.style.color = "#2F4F4F";
    }else if(count > 60 && count <= 90){
        label.innerHTML = "festive";
        label.style.color = "#0000CD";
    }else if(count > 90 && count <= 120){
        label.innerHTML = "party";
        label.style.color = "#9400D3";
    }else if(count > 120 && count <= 150){
        label.innerHTML = "bash";
        label.style.color = "#C71585";
    }else if(count > 150 && count <= 200){
        label.innerHTML = "blast";
        label.style.color = "#FF00FF";
    }

  }

  var input = parseInt(sliderInput.value, 10);

  //Onclick of button, sending a message with content to codeJS
  document.getElementById('generateSelection').onclick = () => {
    parent.postMessage({pluginMessage: { type: 'generate-selection', data: {input, inputColors}}},'*' );
  };

    
  document.getElementById('generateRandom').onclick = () => {
    parent.postMessage({pluginMessage: { type: 'generate-random', data: {input}}},'*' );
  };

 
</script>